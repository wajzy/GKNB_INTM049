\documentclass[usenames,dvipsnames,aspectratio=169]{beamer}
\usepackage{../common/web}

\title[Web technológiák - JavaScript]{Web-technológia}
\subtitle{JavaScript}

% JavaScript
\lstdefinelanguage{JavaScript}{
  morekeywords={typeof, new, true, false, catch, function, return, null, undefined, try, catch, finally, throw, var, let, const, in, while, do, for, if, else, switch, case, default, break, continue, class, interface, instanceof, debugger, delete, enum, export, extends, implements, import, package, private, protected, public, this, super, static, void, with, yield},
  morecomment=[s]{/*}{*/},
  morecomment=[l]//,
  morestring=[b]",
  morestring=[b]'
}

\begin{document}

%1
\begin{frame}[plain]
  \titlepage
  \logoalul
\end{frame}

\section{Értékek (literálok), típusok, műveletek}

\subsection{Számok}

\begin{frame}
    Jellemzők:
    \begin{itemize}
        \item Egyetlen típus létezik csak: 64 bites lebegőpontos ábrázolás
        \item Pl. \texttt{42}, \texttt{12.34}, \texttt{-34.56}, \texttt{1e3}, \texttt{-1e3}, \texttt{1e-3}, \texttt{-1e-3}, \texttt{-1.23e-4}, \texttt{-1.23E+4}, \dots
        \item Különleges értékek: \texttt{Infinity}, \texttt{-Infinity}, \texttt{NaN}
        \item Pl. \texttt{0/0} \kiemelZ{$\to$ NaN}, \texttt{1/0} \kiemelZ{$\to$ Infinity}
    \end{itemize}
    \vfill
    Operátorok
    \begin{itemize}
        \item[$+$] \texttt{5+3} \kiemelZ{$\to$ 8}
        \item[$-$] \texttt{5-3} \kiemelZ{$\to$ 2} 
        \item[$\times$] \texttt{5*3} \kiemelZ{$\to$ 15}
        \item[$/$] \texttt{5/3} \kiemelZ{$\to$ 1.6666666666666667}
        \item[$\%$] \texttt{5\%3} \kiemelZ{$\to$ 2}, \texttt{-5\%3} \kiemelZ{$\to$ -2}, \texttt{5\%-3} \kiemelZ{$\to$ 2} 
        \item[$**$] \texttt{5**3} \kiemelZ{$\to$ \texttt{125}} 
    \end{itemize}
    \hiv{\href{https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence\#table}{Precedencia táblázat}}
\end{frame}

\subsection{Karakterláncok}

\begin{frame}
    Jellemzők
    \begin{itemize}
        \item Unicode, 16 bit karakterenként
        \item Nincs specifikus típus egyetlen karakter tárolására
        \item Jelölés: \texttt{'}-ok vagy \texttt{"}-ek között
        \item Pl. \texttt{'JavaScript'}, \texttt{"JavaScript"}, \texttt{"Guns 'n' Roses"}, \texttt{"Egy\textbackslash nKettő\textbackslash nHárom"}, \texttt{'Guns \textbackslash 'n\textbackslash' Roses'}, \texttt{"Új sor \textbackslash\textbackslash n megadásával kérhető."}
        \item \emph{Template literal:} \texttt{`}-ek között, kifejezések kiértékelése
        \item Pl. \texttt{`5 * 3 = \$\{5*3\}`} \kiemelZ{$\to$ \texttt{"5 * 3 = 15"}}
    \end{itemize}
    \vfill
    Operátor
    \begin{itemize}
        \item[$+$] \texttt{"Java" + 'Script'} \kiemelZ{$\to$ \texttt{"JavaScript"}}
    \end{itemize}
\end{frame}

\subsection{Logikai értékek}

\begin{frame}
    Jellemzők
    \begin{itemize}
        \item Értékek: \texttt{true}, \texttt{false}
        \item Pl. \texttt{5 < 3} \kiemelZ{$\to$ \texttt{false}}
    \end{itemize}
    \vfill
    Logikai operátorok
    \begin{itemize}
        \item[és] \texttt{true \&\& false} \kiemelZ{$\to$ \texttt{false}}
        \item[vagy] \texttt{true || false} \kiemelZ{$\to$ \texttt{true}}
        \item[nem] \texttt{!true} \kiemelZ{$\to$ \texttt{false}}
    \end{itemize}
    \vfill
    \emph{Short circuit evaluation} (pl. alapérték megadására):\\ \qquad \texttt{undefined || "Gizi"} \kiemelZ{$\to$ \texttt{"Gizi"}}, \texttt{null || "Gizi"} \kiemelZ{$\to$ \texttt{"Gizi"}}, \\ \qquad \texttt{"" || "Gizi"} \kiemelZ{$\to$ \texttt{"Gizi"}}, \texttt{"Gizi" || "Mari"} \kiemelZ{$\to$ \texttt{"Gizi"}}
\end{frame}

\begin{frame}
    Relációs operátorok
    \begin{itemize}
        \item \texttt{==}, \texttt{!=}, \texttt{<}, \texttt{<=}, \texttt{>}, \texttt{>=} 
        \item Pl. \texttt{"Bill" != "Gates"} \kiemelZ{$\to$ \texttt{true}}, \texttt{Infinity == Infinity} \kiemelZ{$\to$ \texttt{true}}, \\ \kiemel{de} \texttt{NaN == NaN} \kiemelZ{$\to$ \texttt{false}}
        \item Karakterláncok összehasonlítása: karakterkódok alapján
    \end{itemize}
\end{frame}

\subsection{Egyebek}

\begin{frame}
    Üres értékek: valaminek a hiányát jelzik
    \begin{itemize}
        \item \texttt{undefined}
        \item \texttt{null}
    \end{itemize}
    \vfill
    Egyoperandusú operátorok
    \begin{itemize}
        \item[típus] \texttt{typeof(5)} \kiemelZ{$\to$ \texttt{"number"}}, \texttt{typeof("Gizi")} \kiemelZ{$\to$ \texttt{"string"}}
        \item[$-$] \texttt{-(5)} \kiemelZ{$\to$ \texttt{-5}}
    \end{itemize}
    \vfill
    Háromoperandusú operátor
    \begin{itemize}
        \item[?:] \texttt{1<2?"kisebb":"nagyobb"} \kiemelZ{$\to$ \texttt{"kisebb"}}
    \end{itemize}
\end{frame}

\subsection{Automatikus típuskonverzió (\emph{Type coercion})}

\begin{frame}
    Néhány példa:
    \begin{itemize}
        \item \texttt{5 * null} \kiemelZ{$\to$ \texttt{0}}
        \item \texttt{"5" - 3} \kiemelZ{$\to$ \texttt{2}}
        \item \texttt{"5" + 3} \kiemelZ{$\to$ \texttt{"53"}}
        \item \texttt{"öt" * 3} \kiemelZ{$\to$ \texttt{NaN}}, \texttt{5 * undefined} \kiemelZ{$\to$ \texttt{NaN}}
        \item \texttt{false == 0} \kiemelZ{$\to$ \texttt{true}}, \texttt{true == 1} \kiemelZ{$\to$ \texttt{true}}, \texttt{true == 2} \kiemelZ{$\to$ \texttt{false}}, \\ \texttt{"" == false} \kiemelZ{$\to$ \texttt{true}}
        \item Definiált az érték? \texttt{null == undefined} \kiemelZ{$\to$ \texttt{true}}, \texttt{null == 0} \kiemelZ{$\to$ \texttt{false}}
    \end{itemize}
    \vfill
    Típusok egyezését megkövetelő operátorok: \texttt{===}, \texttt{!==}
\end{frame}

\section{Változók, konstansok, vezérlési szerkezetek}

\subsection{Változók és konstansok}

\begin{frame}
    Változók (\emph{variable}, \emph{binding})
    \begin{itemize}
        \item Deklaráció: \texttt{let} (blokk hatáskör), \texttt{var} (függvény hatáskör)
        \item Inkább tekinthető értékre mutató referenciának, mint valódi tárolónak
    \end{itemize}
    \begin{exampleblock}{Példa}
        a \kiemelZ{$\to$ ReferenceError: a is not defined}\\
        let a\\
        a \kiemelZ{$\to$ undefined}\\
        a = 5\\
        a \kiemelZ{$\to$ 5}\\
        let b = 3, c\\
        a * b \kiemelZ{$\to$ 15}\\
    \end{exampleblock}
\end{frame}

\begin{frame}
    Konstansok
    \begin{itemize}
        \item \texttt{const}
    \end{itemize}
    \begin{exampleblock}{Példa}
        const c = 3.14\\
        c = 2 \kiemelZ{$\to$ TypeError: invalid assignment to const 'c'}
    \end{exampleblock}
    \vfill
    Névadási szabályok
    \begin{itemize}
        \item betűket, számokat, \$ és \_ karaktereket tartalmazhat
        \item számjeggyel nem kezdődhet
        \item nem lehet foglalt szó (pl. \texttt{let})
        \item kis- és nagybetűket megkülönbözteti
        \item javasolt stílus: \emph{camel case} (\texttt{hosszuValtozoNeve})
    \end{itemize}
\end{frame}

\begin{frame}
    Változókkal használható (összetett és unáris) operátorok
    \begin{itemize}
        \item \texttt{+=}, \texttt{-=}, \texttt{*=}, \texttt{/=}, \texttt{\%=}, \texttt{\&\&=}, \texttt{||=}, \texttt{**=}, \dots 
        \item \texttt{++}, \texttt{--}
    \end{itemize}
    \vfill
    Környezet (\emph{environment})
    \begin{itemize}
        \item adott pillanatban létező változók és értékeik
        \item gyakorlatilag soha nincs üres környezet
    \end{itemize}
    \vfill
    Megjegyzések
    \begin{itemize}
        \item // egysoros
        \item /* több \\ \quad soros */
    \end{itemize}
\end{frame}

\subsection{Vezérlési szerkezetek}

\begin{frame}
    Szelekció
    \begin{columns}[T]
        \column{0.5\textwidth}
        \begin{itemize}
          \item \texttt{if}(\emph{feltétel}) \emph{utasítás};
          \item \texttt{if}(\emph{feltétel}) \{\\
          \qquad // utasítások \\
          \}
          \item \texttt{if}(\emph{feltétel}) \{ \\
            \qquad // igaz ág utasításai \\
            \} \texttt{else} \{ \\
            \qquad // hamis ág utasításai \\
            \}
        \end{itemize}
        \column{0.5\textwidth}
        \begin{itemize}
          \item Mikor \kiemel{nem} teljesül a \emph{feltétel}?
          \begin{itemize}
            \item false
            \item 0
            \item ""
            \item NaN
            \item null
            \item undefined
          \end{itemize}
        \end{itemize}
      \end{columns}
\end{frame}

\begin{frame}
    Több irányú elágazás
    \begin{columns}[T]
        \column{0.4\textwidth}
        \texttt{switch}(\emph{kifejezés}) \{ \\
        \qquad \texttt{case} \emph{érték1}: \\
        \qquad \qquad // utasítások \\
        \qquad \qquad \texttt{break}; \\
        \qquad \texttt{case} \emph{érték2}: \\
        \qquad \texttt{case} \emph{érték3}: \\
        \qquad \qquad // utasítások \\
        \qquad \qquad \texttt{break}; \\
        \qquad \texttt{default}: \\
        \qquad \qquad // utasítások \\
        \qquad \qquad \texttt{break}; \\
        \}
      \column{0.5\textwidth}
        Az értéknek \emph{és} a típusnak is egyeznie kell! \\
        A \emph{default} ág elhagyható.
    \end{columns}
\end{frame}

\begin{frame}
    Ciklusok
    \vfill
    \texttt{for}(\emph{előkészítés}; \emph{ismétlési\_feltétel}; \emph{frissítés}) \{ \\
    \qquad // Ciklusmag utasításai \\
    \}
    \vfill
    \texttt{while}(\emph{ismétlési\_feltétel}) \{ \\
    \qquad // Ciklusmag utasításai \\
    \}
    \vfill
    \texttt{do} \{ \\
    \qquad // Ciklusmag utasításai \\
    \} \texttt{while} (\emph{ismétlési\_feltétel});
    \vfill
    \texttt{break}, \texttt{continue}
\end{frame}

\subsection{Feladatok}

\begin{frame}[fragile]
    \begin{exampleblock}{Háromszög rajzolás (\textattachfile{haromszog.js}{megoldás})}
        A böngésző JavaScript konzolján egy sornyi szöveget a \texttt{console.log()} hívással tud megjeleníteni. Használja ezt a következő háromszög megrajzolására:\\
        \begin{verbatim}
*
**
***
****
*****                
\end{verbatim}
    \end{exampleblock}
\end{frame}

\begin{frame}[fragile]
    \begin{exampleblock}{X rajzolás (\textattachfile{x.js}{megoldás})}
        Most rajzoljon 5x5-ös méretű X-et csillagokból:\\
        \begin{verbatim}
*   *
 * *
  *
 * *
*   *            
\end{verbatim}
    \end{exampleblock}
\end{frame}

\begin{frame}[fragile]
    \begin{exampleblock}{Sakktábla (\textattachfile{sakk.js}{megoldás})}
        Rajzoljon meg egy 8x8-as méretű sakktáblát, szintén csillagokból!\\
        \begin{verbatim}
 * * * *
* * * *
 * * * *
* * * *
 * * * *
* * * *
 * * * *
* * * *
\end{verbatim}
    \end{exampleblock}
\end{frame}

\begin{frame}[fragile]
    \begin{exampleblock}{FizzBuzz (\textattachfile{fizzbuzz.js}{megoldás})}
        Vizsgálja meg az egész számokat 1-től 100-ig, majd a vizsgálat eredményét jelenítse meg egymás alatti sorokban! Ha a szám osztható 3-mal, írja ki, hogy \emph{Fizz}, ha 5-tel osztható, akkor azt, hogy \emph{Buzz}, ha pedig 3-mal és 5-tel is osztható, akkor azt, hogy \emph{FizzBuzz}! Ha egyik számmal sem osztható, akkor írja ki a vizsgált számot!\\
        \begin{verbatim}
1
2
Fizz
4
Buzz
Fizz
...
\end{verbatim}
    \end{exampleblock}
\end{frame}

\section{Függvények}

\subsection{Függvények létrehozása}

\begin{frame}
    \begin{exampleblock}{Definíció: a függvény, mint \emph{érték} jelenik meg (\textattachfile{hatvanyDef.js}{hatvanyDef.js})}
        \small
        \lstinputlisting[language=JavaScript,numbers=left]{hatvanyDef.js}
    \end{exampleblock}
\end{frame}

\begin{frame}
    \begin{exampleblock}{Deklaráció: helye a hatókörön belül bárhol lehet (\textattachfile{hatvanyDek.js}{hatvanyDek.js})}
        \small
        \lstinputlisting[language=JavaScript,numbers=left]{hatvanyDek.js}
    \end{exampleblock}
\end{frame}

\begin{frame}
    \begin{exampleblock}{Nyíl (\emph{arrow}) függvény: tömörebb megadás (\textattachfile{hatvanyNyil.js}{hatvanyNyil.js})}
        \small
        \lstinputlisting[language=JavaScript,numbers=left]{hatvanyNyil.js}
    \end{exampleblock}
\end{frame}

\begin{frame}
    Nyíl függvények
    \begin{itemize}
        \item Ha pontosan egy paramétert fogad, a paraméterlista körüli zárójelek elhagyhatóak
        \item Ha egyetlen paramétert sem fogad, üres zárójelpár jelzi a paraméterlistát
        \item Ha a függvény teste egyetlen kifejezés értékét szolgáltatja, a \texttt{return} és a blokk elhagyható
    \end{itemize}
    \begin{exampleblock}{\textattachfile{nyilValtozatok.js}{nyilValtozatok.js}}
        \small
        \lstinputlisting[language=JavaScript,numbers=left]{nyilValtozatok.js}
    \end{exampleblock}
\end{frame}

\subsection{Hatókör, \emph{lexical scope}}

\begin{frame}
    \begin{exampleblock}{\textattachfile{hatokor.js}{hatokor.js}}
        \scriptsize
        \lstinputlisting[language=JavaScript,numbers=left]{hatokor.js}
    \end{exampleblock}
\end{frame}

\subsection{Függvények paraméterezése}

\begin{frame}
    Paraméterezés
    \begin{itemize}
        \item Nem ellenőrzi híváskor sem a paraméterek számát, sem azok típusát! $\to$ felesleges paramétereket figyelmen kívül hagyja, a hiányzók értéke \texttt{undefined}
        \item A \texttt{return} nélküli, vagy a \texttt{return} után kifejezést nem tartalmazó függvények visszatérési értéke \texttt{undefined}
        \item Tetszőleges számú paramétert fogadó fv. is készíthető (ld. később)
    \end{itemize}
    \begin{exampleblock}{\textattachfile{parameter1.js}{parameter1.js}}
        \small
        \vspace{-0.3cm}
        \lstinputlisting[language=JavaScript,numbers=left]{parameter1.js}
        \vspace{-0.3cm}
    \end{exampleblock}
\end{frame}

\begin{frame}
    \begin{exampleblock}{\textattachfile{parameter2.js}{parameter2.js}}
        \lstinputlisting[language=JavaScript,numbers=left]{parameter2.js}
    \end{exampleblock}
\end{frame}

\subsection{Függvények, mint értékek}

\begin{frame}
    A függvények \emph{értékek}:
    \begin{itemize}
        \item függvények átadhatók más függvénynek paraméterként,
        \item függvény visszatérési értéke lehet függvény,
        \item függvény beágyazható másik függvénybe.
    \end{itemize}
    \begin{exampleblock}{\textattachfile{paramFv1.js}{paramFv1.js}}
        \lstinputlisting[language=JavaScript,numbers=left]{paramFv1.js}
    \end{exampleblock}
\end{frame}

\begin{frame}
    \begin{exampleblock}{Névtelen (\emph{anonymous}) függvények (\textattachfile{paramFv2.js}{paramFv2.js})}
        \lstinputlisting[language=JavaScript,numbers=left]{paramFv2.js}
    \end{exampleblock}
\end{frame}

\begin{frame}
    \begin{exampleblock}{Függvények definiálása és azonnali hívása (\textattachfile{paramFv3.js}{paramFv3.js})}
        \lstinputlisting[language=JavaScript,numbers=left]{paramFv3.js}
    \end{exampleblock}
\end{frame}

\begin{frame}
    Zárványok (\emph{closure})
    \begin{itemize}
        \item<1-> Mi történik, ha egy \emph{külső} függvény \emph{lokális} változóit eléri egy \emph{belső} függvény, amit \emph{meghívunk azután, hogy} az őt létrehozó \emph{külső függvényből kiléptünk}?
        \item<2-> A függvény megőrzi futtatási környezetét
    \end{itemize}
\end{frame}

\begin{frame}
    \begin{exampleblock}{Függvény, mint visszatérési érték (\textattachfile{zarvany.js}{zarvany.js})}
        \small
        \lstinputlisting[language=JavaScript,numbers=left]{zarvany.js}
    \end{exampleblock}
\end{frame}

\subsection{Rekurzió}

\begin{frame}
    \begin{exampleblock}{Rekurzív hatványozás (\textattachfile{rekurzio.js}{rekurzio.js})}
        \small
        \lstinputlisting[language=JavaScript,numbers=left]{rekurzio.js}
    \end{exampleblock}
\end{frame}

\subsection{Feladatok}

\begin{frame}
    \begin{exampleblock}{Fibonacci-számok (\textattachfile{fibonacci.js}{fibonacci.js})}
        Fibonacci-sorozat: másodrendben rekurzív sorozat. Képzeletbeli nyúlcsalád növekedése: hány pár nyúl lesz $n$ hónap múlva, ha
        \begin{itemize}
            \item az első hónapban csak egyetlen újszülött nyúl-pár van,
            \item az újszülött nyúl-párok két hónap alatt válnak termékennyé,
            \item minden termékeny nyúl-pár minden hónapban egy újabb párt szül,
            \item és a nyulak örökké élnek.
        \end{itemize}
        \vfill
        $F_n = \left\{ \begin{array}{ll}
            0, & \textrm{ha $n=0$}\\
            1, & \textrm{ha $n=1$}\\
            F_{n-1} + F_{n-2} & \textrm{ha $n>1$}
        \end{array} \right.$ \\
        Készítse el azt a \texttt{fibonacci} függvényt, melynek paramétere a sorozat valamely elemének indexe (\emph{n}), visszatérési értéke a sorozat megfelelő eleme!
    \end{exampleblock}
\end{frame}

\begin{frame}
    \begin{exampleblock}{Négyzetgyökvonás (\textattachfile{gyok.js}{gyok.js})}
        \small
        Készítse el a \texttt{gyok} függvényt, mely Newton módszerrel meghatározza és visszatérési értékként szolgáltatja paraméterének négyzetgyökét! \\
        A módszer iteratív: egy sorozat egymást követő tagjait kell kiszámolni, melyek általában nagyon gyorsan konvergálnak a keresett eredményhez. A sorozat első elemét célszerű lenne a megoldás közeléből választani, de az egyszerűség kedvéért legyen ez nálunk mindig 10. Ha az utolsóként meghatározott tag értéke \( 10^{-6} \)-nál nem nagyobb mértékben tér el az utolsó előttiként kiszámolttól, akkor ezt az utolsóként kiszámolt értéket tekintjük a megoldásnak. A Newton módszer szerint a sorozat tagjait általánosan a következőképpen határozzuk meg: \( x_{n+1} = x_n - \frac{f(x_n)}{f'(x_n)} \) \\
        Konkrétan a négyzetgyökvonás esetén, ha pl. az \( x^2 = 612 \) (itt 612 a \texttt{gyok} függvény aktuális paraméterének feleltethető meg) zérushelyét keressük, azaz \( f(x) = x^2 - 612 \) akkor \( f'(x) = 2x \). \\
        Ebből adódik, hogy \( x_1 = x_0 - \frac{f(x_0)}{f'(x_0)} = 10 - \frac{10^2 - 612}{2 \cdot 10} = 35.6 \) majd \( x_2 = x_1 - \frac{f(x_1)}{f'(x_1)} = 35.6 - \frac{35.6^2 - 612}{2 \cdot 35.6} = 26.3955056 \), stb.
    \end{exampleblock}
\end{frame}

\begin{frame}
    \begin{exampleblock}{Szinusz függvény (\textattachfile{sin.js}{sin.js})}
        Írja meg azt a \texttt{sin} függvényt, amely visszaadja a paraméterként kapott, radiánban mért szög szinuszát!\\
        \smallskip
        A keresett érték meghatározható a szinusz függvény sorba fejtésével: \( sin(x) = \sum_{n=0}^\infty \frac{(-1)^n}{(2n+1)!} x^{2n+1} \) azaz \( sin(x) = x-\frac{x^3}{3!}+\frac{x^5}{5!}-\frac{x^7}{7!}+\dots \)\\
        \smallskip
        A függvénynek természetesen nem kell végtelen sok tagot, illetve azok összegét meghatároznia. Elegendő, ha a függvény \( \epsilon = 10^{-6} \) pontossággal kiszámítja az eredményt.
    \end{exampleblock}
\end{frame}

\end{document}
