\section{Objektumok és tömbök}

\subsection{Objektum létrehozása literálként, módosítása, használata}

\begin{frame}
  \small
  Objektumok
  \begin{itemize}
    \item tulajdonság (kulcs) -- érték párok (csak a \texttt{null}-nak és az \texttt{undefined}-nak nincsenek tulajdonságai a nyelvben)
    \item minden tulajdonság egyedi az objektumban
    \item a tulajdonság lehet adat vagy függvény (metódus)
    \item a tulajdonságot az értéktől \kiemel{:} választja el, a párokat egymástól \kiemel{,}
  \end{itemize}
  \begin{exampleblock}{\textattachfile{objektumok.js}{Objektum definiálása literálként}}
    \vspace{-0.3cm}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=1-5]{objektumok.js}
    \vspace{-0.3cm}
  \end{exampleblock}
\end{frame}

\begin{frame}
  \texttt{hg} kötése konstans, de ettől még a tulajdonságok értéke megváltoztatható.\\
  Tulajdonságok elérése: \texttt{objektum\kiemel{.}tulajdonság} formában
  \footnotesize
  \begin{exampleblock}{\textattachfile{objektumok.js}{Objektum módosítása}}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=6-16,firstnumber=6]{objektumok.js}
  \end{exampleblock}
\end{frame}

\begin{frame}
  \small
  \begin{exampleblock}{\textattachfile{objektumok.js}{Két kötés (referencia) ugyanarra az objektumra}}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=18-21,firstnumber=18]{objektumok.js}
  \end{exampleblock}
  \normalsize
  Tulajdonságok feltérképezése
  \begin{itemize}
    \item \texttt{in} (tartalmazás) operátor (vs. \texttt{if(objektum.tulajdonság) \dots})
    \item \texttt{for/in} ciklus, a tulajdonságokon történő iterálásra
  \end{itemize}
  Ha a tulajdonság neve kötéssel adott, a \kiemel{.} operátor nem használható $\to$ objektum\kiemel{[}"tulajdonság"\kiemel{]}
\end{frame}

\begin{frame}
  \small
  \begin{exampleblock}{\textattachfile{objektumok.js}{Tulajdonságok elérése}}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=23-32,firstnumber=23]{objektumok.js}
  \end{exampleblock}
\end{frame}

\begin{frame}[fragile]
  Objektumok tartalmának másolása: \\
  \qquad \texttt{Object.assign(cél, forrás1, forrás2, ..., forrásN)}\\
  Visszatérési érték: \texttt{cél}
  \footnotesize
  \begin{columns}[T]
    \column{0.65\textwidth}
      \begin{exampleblock}{\textattachfile{objektumok.js}{Tulajdonságok másolása}}
        \lstinputlisting[language=JavaScript,numbers=left,linerange=34-43,firstnumber=34]{objektumok.js}
      \end{exampleblock}
    \column{0.3\textwidth}
      \begin{block}{Kimenet}
        \begin{verbatim}
nev : Kovács Emőke
neptun : a1b2c3
zh : 15
zh2 : 19

nev : Kovács István
zh2 : 19
neptun : a1b2c3
zh : 15
\end{verbatim}
      \end{block}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  Tulajdonságok értékadással bármikor felvehetők az objektumba, és \texttt{delete} operátorral törölhetőek
  \vfill
  \footnotesize
  \begin{columns}[T]
    \column{0.65\textwidth}
      \begin{exampleblock}{\textattachfile{objektumok.js}{Tulajdonságok hozzáadása, törlése}}
        \lstinputlisting[language=JavaScript,numbers=left,linerange=45-49,firstnumber=45]{objektumok.js}
      \end{exampleblock}
    \column{0.3\textwidth}
      \begin{block}{Kimenet}
        \begin{verbatim}
nev : Kovács István
neptun : a1b2c3
zh1 : 15
zh2 : 20
\end{verbatim}
      \end{block}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  Rövidített objektum definíciós szintakszis: a kötés neve lesz a tulajdonság neve is
  \scriptsize
  \begin{columns}[T]
    \column{0.65\textwidth}
      \begin{exampleblock}{\textattachfile{objektumok.js}{Metódus hozzáadása}}
        \lstinputlisting[language=JavaScript,numbers=left,linerange=51-63,firstnumber=51]{objektumok.js}
      \end{exampleblock}
    \column{0.3\textwidth}
      \begin{block}{Kimenet}
        \begin{verbatim}
nev : Fekete Péter
neptun : abcdef
zh1 : 12
zh2 : 8

nev : Fekete Péter
neptun : abcdef
zh1 : 12
zh2 : 8
\end{verbatim}
      \end{block}
  \end{columns}
\end{frame}

\begin{frame}
  Metódus: a tulajdonság értéke függvény. Az objektum többi tulajdonsága a \texttt{this}-en keresztül érhető el
  \vfill
  \small
  \begin{exampleblock}{\textattachfile{objektumok.js}{Metódus hozzáadása}}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=65-70,firstnumber=65]{objektumok.js}
  \end{exampleblock}
\end{frame}

\subsection{Tömbök létrehozása literálként, módosítása, használata}

\begin{frame}
  Tömbök
  \begin{itemize}
    \item Speciális objektumok, amelyekben a tulajdonságok nevei (kulcsok) nem negatív egész számok, de az értékek vegyesen bármilyen típusúak lehetnek
    \item Tömb literál létrehozása: \texttt{[elem1, elem2, ..., elemN]}
    \item Tömb elemszáma: \texttt{tömb.length} tulajdonság
    \item Elemek elérése: \texttt{[]} operátorral
  \end{itemize}
  \footnotesize
  \begin{exampleblock}{\textattachfile{tombok.js}{Tömb létrehozása, indexelés, elemszám megállapítás}}
    \vspace{-0.3cm}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=1-7]{tombok.js}
    \vspace{-0.3cm}
  \end{exampleblock}
\end{frame}

\begin{frame}[fragile]
  A tömb bejárására használhatóak a \texttt{for/in} (tulajdonságok/indexek) és \texttt{for/of} (értékek) ciklusok
  \footnotesize
  \begin{columns}[T]
    \column{0.65\textwidth}
      \begin{exampleblock}{\textattachfile{objektumok.js}{Tömbök bejárása}}
        \vspace{-0.3cm}
        \lstinputlisting[language=JavaScript,numbers=left,linerange=9-21,firstnumber=9]{tombok.js}
        \vspace{-0.3cm}
      \end{exampleblock}
    \column{0.3\textwidth}
      \begin{block}{Kimenet}
        \begin{verbatim}
Alma
Burgonya
Citrom

0 : Alma
1 : Burgonya
2 : Citrom
\end{verbatim}
      \end{block}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  Tömböt állít elő az \texttt{Object.keys()} egy objektum tulajdonságaiból
  \small
  \begin{columns}[T]
    \column{0.65\textwidth}
      \begin{exampleblock}{\textattachfile{objektumok.js}{Objektum tulajdonságainak visszaadása tömbként}}
        \lstinputlisting[language=JavaScript,numbers=left,linerange=23-28,firstnumber=23]{tombok.js}
      \end{exampleblock}
    \column{0.3\textwidth}
      \begin{block}{Kimenet}
        \begin{verbatim}
0 : egy
1 : ketto
2 : harom
\end{verbatim}
      \end{block}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  További elemek hozzáadása egy kiválasztott indexű elemhez történő hozzárendeléssel lehetséges. A tömb elemszáma a legnagyobb index alapján kerül meghatározásra, \kiemel{nem a tárolt elemek száma} alapján!
  \footnotesize
  \begin{columns}[T]
    \column{0.65\textwidth}
      \begin{exampleblock}{\textattachfile{objektumok.js}{Tömbök elemei}}
        \lstinputlisting[language=JavaScript,numbers=left,linerange=30-35,firstnumber=30]{tombok.js}
      \end{exampleblock}
    \column{0.3\textwidth}
      \begin{block}{Kimenet}
        \vspace{-0.3cm}
        \begin{verbatim}
0 : Alma
1 : Burgonya
2 : Citrom
3 : Dió
6
undefined
0 : Alma
1 : Burgonya
2 : Citrom
3 : Dió
5 : Füge
\end{verbatim}
      \vspace{-0.3cm}
      \end{block}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  A literál megadásakor is jelezhetjük, hogy bizonyos indexű elemeket nem kívánunk létrehozni.
  \small
  \begin{columns}[T]
    \column{0.65\textwidth}
      \begin{exampleblock}{\textattachfile{objektumok.js}{Hiányos tömbök}}
        \lstinputlisting[language=JavaScript,numbers=left,linerange=36-41,firstnumber=36]{tombok.js}
      \end{exampleblock}
    \column{0.3\textwidth}
      \begin{block}{Kimenet}
        \begin{verbatim}
3
0 : Alma
2 : Citrom
4
0 : Alma
2 : Citrom
3 : undefined
\end{verbatim}
      \end{block}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  Tömbelem törlése: \texttt{delete} operátorral
  \vfill
  \small
  \begin{columns}[T]
    \column{0.65\textwidth}
      \begin{exampleblock}{\textattachfile{objektumok.js}{Tömbelem törlése}}
        \lstinputlisting[language=JavaScript,numbers=left,linerange=43-44,firstnumber=43]{tombok.js}
      \end{exampleblock}
    \column{0.3\textwidth}
      \begin{block}{Kimenet}
        \begin{verbatim}
0 : Alma
3 : undefined
\end{verbatim}
      \end{block}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  \small
  Verem műveletek
  \begin{itemize}
    \item Tömb végén: \texttt{push()}/\texttt{pop()}
    \item Tömb elején: \texttt{unshift()}/\texttt{shift()} (vagyis egy \emph{igazi} sort pl. a \texttt{push()}/\texttt{shift()} párossal lehetne létrehozni)
  \end{itemize}
  \scriptsize
  \begin{columns}[T]
    \column{0.65\textwidth}
      \begin{exampleblock}{\textattachfile{objektumok.js}{Veremműveletek}}
        \lstinputlisting[language=JavaScript,numbers=left,linerange=46-54,firstnumber=46]{tombok.js}
      \end{exampleblock}
    \column{0.15\textwidth}
      \begin{block}{Kimenet 1/2}
        \begin{verbatim}
0 : 1
1 : 2
2 : 3
3 : 4
4
0 : 1
1 : 2
2 : 3
\end{verbatim}
      \end{block}
      \column{0.15\textwidth}
      \begin{block}{Kimenet 2/2}
        \begin{verbatim}
0 : 0
1 : 1
2 : 2
3 : 3
0
0 : 1
1 : 2
2 : 3
\end{verbatim}
      \end{block}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  Tömbök egyesítése: \texttt{concat()}
  \vfill
  \small
  \begin{columns}[T]
    \column{0.65\textwidth}
      \begin{exampleblock}{\textattachfile{objektumok.js}{Tömbök egyesítése}}
        \lstinputlisting[language=JavaScript,numbers=left,linerange=56-59,firstnumber=56]{tombok.js}
      \end{exampleblock}
    \column{0.3\textwidth}
      \begin{block}{Kimenet}
        \begin{verbatim}
0 : Alma
1 : Banán
2 : 1
3 : 2
4 : 3
\end{verbatim}
      \end{block}
  \end{columns}
\end{frame}

\begin{frame}
  Tömbelemek kivágása és beillesztése az eredeti tömb módosításával (= helyben): 
  \begin{itemize}
    \item \texttt{tömb.s\kiemel{p}lice(\emph{tol}[, \emph{db}[, \emph{elem1}[, \emph{elem2}[, \dots[, \emph{elemN}]]]]])} 
    \item \texttt{\emph{tol}}: a műveletvégzés indexe, lehet negatív is
    \item \texttt{\emph{db}}: a törölni kívánt elemek száma
    \item \texttt{\emph{elem1}, \emph{elem2}, \dots, \emph{elemN}}: beszúrandó új elemek
    \item visszatérési érték: a törölt elemek tömbje
  \end{itemize}
  \footnotesize
  \begin{exampleblock}{\textattachfile{tombok.js}{Törlés és beszúrás}}
    \vspace{-0.3cm}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=61-66,firstnumber=61]{tombok.js}
    \vspace{-0.3cm}
  \end{exampleblock}
\end{frame}

\begin{frame}
  Új tömb létrehozása meglévő tömb elemeinek kimásolásával
  \begin{itemize}
    \item \texttt{tömb.slice(\emph{tol}[, \emph{ig}])} 
    \item \texttt{\emph{tol}}: kezdőindex
    \item \texttt{\emph{ig}}: végindex (ezt már \kiemel{nem} érinti a művelet); alapértelmezett értéke \texttt{tömb.length}
    \item az indexek lehetnek negatívak is
    \item visszatérési érték: az új tömb
  \end{itemize}
  \footnotesize
  \begin{exampleblock}{\textattachfile{tombok.js}{Új tömb létrehozása meglévő alapján}}
    \vspace{-0.3cm}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=68-73,firstnumber=68]{tombok.js}
    \vspace{-0.3cm}
  \end{exampleblock}
\end{frame}

\begin{frame}
  \footnotesize
  Keresés tömbökben: 
  \begin{itemize}
    \item \texttt{tömb.indexOf(\emph{keresett}[, \emph{tol}])} \\
          \texttt{tömb.lastIndexOf(\emph{keresett}[, \emph{tol}])}
    \item \texttt{indexOf}: balról jobbra, \texttt{lastIndexOf}: jobbról balra keres
    \item \texttt{\emph{keresett}}: a keresett érték
    \item \texttt{\emph{tol}}: keresés megkezdésének helye, index; elhagyható, és lehet negatív is
    \item visszatérési érték: -1, ha nincs találat
  \end{itemize}
  \scriptsize
  \begin{exampleblock}{\textattachfile{tombok.js}{Keresés tömbökben}}
    \vspace{-0.3cm}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=75-82,firstnumber=75]{tombok.js}
    \vspace{-0.3cm}
  \end{exampleblock}
\end{frame}

\begin{frame}[fragile]
  Többdimenziós tömb egydimenziós tömbök egymásba ágyazásával hozható létre
  \vfill
  \footnotesize
  \begin{columns}[T]
    \column{0.75\textwidth}
      \begin{exampleblock}{\textattachfile{objektumok.js}{Többdimenziós tömbök}}
        \lstinputlisting[language=JavaScript,numbers=left,linerange=84-93,firstnumber=84]{tombok.js}
      \end{exampleblock}
    \column{0.2\textwidth}
      \begin{block}{Kimenet}
        \begin{verbatim}
0 0 : Alma
0 1 : Banán
1 0 : 1
1 1 : 2
1 2 : 3
\end{verbatim}
      \end{block}
  \end{columns}
\end{frame}

\subsection{Dekompozíció (destructuring)}

\begin{frame}
  Egy tömb elemeinek elérése nehézkes lehet, főleg ha többdimenziós, nagy elemszámú tömbről van szó. Példa: 2x2-es mátrix \hiv{\href{https://math.bme.hu/algebra/a2/2009/4_Matrixok_jellemzese.002.pdf}{determinánsának}} meghatározása.\\
  $\left[ \begin{array}{cc} a & b \\ c & d \\ \end{array} \right] = a\times d - b\times c$ \\
  Egyszerűbb, kifejezőbb, ha indexelés nélkül, közvetlenül elérhetők a mátrix elemei.
  \footnotesize
  \begin{exampleblock}{\textattachfile{destructuring.js}{Dekompozíció}}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=1-7]{destructuring.js}
  \end{exampleblock}
\end{frame}

\begin{frame}
  Hasonló dekompozíció objektumokkal is megvalósítható.
  \footnotesize
  \begin{exampleblock}{\textattachfile{destructuring.js}{Dekompozíció}}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=9-12,firstnumber=9]{destructuring.js}
  \end{exampleblock}
\end{frame}

\subsection{Változó számú paramétert fogadó függvények}

\begin{frame}
  Egy függvény fogadhat előre meg nem határozott számú paramétert, melyeket az \texttt{arguments} tömb-szerű változón keresztül érhet el.
  \begin{exampleblock}{\textattachfile{restparams.js}{Változó számú paraméter}}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=1-8]{restparams.js}
  \end{exampleblock}
\end{frame}

\begin{frame}
  Fejlettebb megoldás a maradék paraméterek (rest parameters) használata, mely a külön átadott aktuális paramétereket egy adott nevű tömbbe gyűjti.
  \begin{exampleblock}{\textattachfile{restparams.js}{Változó számú paraméter}}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=10-17,firstnumber=10]{restparams.js}
  \end{exampleblock}
\end{frame}

\begin{frame}
  Ez a megoldás független értékeknek tömbbe foglalására, és tömb elemeinek különálló változókba helyezésére is lehetőséget ad.
  \begin{exampleblock}{\textattachfile{restparams.js}{Független változók $\leftrightarrow$ tömb}}
    \lstinputlisting[language=JavaScript,numbers=left,linerange=19-22,firstnumber=19]{restparams.js}
  \end{exampleblock}
\end{frame}
